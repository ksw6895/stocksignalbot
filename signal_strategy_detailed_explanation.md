# ì‹œê·¸ë„ í¬ì°© ì „ëµ ìƒì„¸ ì„¤ëª…

## ê°œìš”
ì´ ì‹œìŠ¤í…œì€ NASDAQ ì£¼ì‹ ì‹œì¥ì—ì„œ Kwon Strategyë¥¼ í™œìš©í•˜ì—¬ ë§¤ìˆ˜ ì‹œê·¸ë„ì„ í¬ì°©í•˜ëŠ” ìë™í™”ëœ íŠ¸ë ˆì´ë”© ë´‡ì…ë‹ˆë‹¤. ì£¼ê°„(Weekly) ìº”ë“¤ìŠ¤í‹± ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŠ¹ì • íŒ¨í„´ì„ ì‹ë³„í•˜ê³ , ê¸°ìˆ ì  ì§€í‘œë¥¼ í™œìš©í•˜ì—¬ ì§„ì… ì‹œì ì„ ê²°ì •í•©ë‹ˆë‹¤.

## 1. ì „ì²´ ì‘ë™ í”„ë¡œì„¸ìŠ¤

### 1.1 ì‹œìŠ¤í…œ ì´ˆê¸°í™” ë° ìŠ¤ì¼€ì¤„ë§
```
StockSignalBot ì‹œì‘
    â†“
í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ (API í‚¤, í…”ë ˆê·¸ë¨ ì„¤ì •)
    â†“
ì´ˆê¸° ìŠ¤ìº” ì‹¤í–‰
    â†“
ë§¤ ì‹œê°„ë§ˆë‹¤ ìŠ¤ìº” ìŠ¤ì¼€ì¤„ë§ (ê¸°ë³¸: 3600ì´ˆ)
    â†“
ë§¤ì¼ 16:30 ì¼ì¼ ìš”ì•½ ë³´ê³ ì„œ ì „ì†¡
```

### 1.2 ìŠ¤ìº” í”„ë¡œì„¸ìŠ¤ íë¦„
1. **ì‹œì¥ ìƒíƒœ í™•ì¸**: ê±°ë˜ ì‹œê°„ ì—¬ë¶€ ì²´í¬ (ì„ íƒì )
2. **ì£¼ì‹ í•„í„°ë§**: FMP APIë¥¼ í†µí•´ NASDAQ ì£¼ì‹ ëª©ë¡ íšë“
3. **ë°°ì¹˜ ì²˜ë¦¬**: 20ê°œì”© ë¬¶ì–´ì„œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì  ì²˜ë¦¬
4. **íŒ¨í„´ ë¶„ì„**: ê° ì£¼ì‹ì— ëŒ€í•´ Kwon Strategy ì ìš©
5. **ì‹œê·¸ë„ ê²€ì¦**: ìœ íš¨í•œ ì‹œê·¸ë„ í•„í„°ë§
6. **ì•Œë¦¼ ì „ì†¡**: í…”ë ˆê·¸ë¨ìœ¼ë¡œ ë§¤ìˆ˜ ì‹œê·¸ë„ ì „ì†¡

## 2. ì£¼ì‹ í•„í„°ë§ ë©”ì»¤ë‹ˆì¦˜

### 2.1 ì‹œê°€ì´ì•¡ í•„í„°ë§
```python
MIN_MARKET_CAP = 500,000,000    # 5ì–µ ë‹¬ëŸ¬
MAX_MARKET_CAP = 50,000,000,000 # 500ì–µ ë‹¬ëŸ¬
```
- **ëª©ì **: ê·¹ì†Œí˜•ì£¼ì™€ ì´ˆëŒ€í˜•ì£¼ë¥¼ ì œì™¸í•˜ì—¬ ì ì ˆí•œ ìœ ë™ì„±ê³¼ ë³€ë™ì„±ì„ ê°€ì§„ ì¢…ëª© ì„ ë³„
- **êµ¬í˜„**: FMP APIì˜ ìŠ¤í¬ë¦¬ë„ˆ ê¸°ëŠ¥ì„ í†µí•´ NASDAQ ìƒì¥ ì£¼ì‹ ì¤‘ ì‹œê°€ì´ì•¡ ë²”ìœ„ ë‚´ ì¢…ëª©ë§Œ ì¶”ì¶œ

### 2.2 ì¶”ê°€ ê²€ì¦ ì¡°ê±´
```python
def _validate_stock(self, stock: Dict) -> bool:
    # ê°€ê²© ë²”ìœ„: $1 ~ $10,000
    if price < MIN_PRICE or price > MAX_PRICE:
        return False
    
    # ìµœì†Œ ê±°ë˜ëŸ‰: 100,000ì£¼
    if volume < MIN_VOLUME:
        return False
    
    # ì‹œê°€ì´ì•¡ ì¬í™•ì¸
    if market_cap < MIN_MARKET_CAP or market_cap > MAX_MARKET_CAP:
        return False
```

### 2.3 ìºì‹± ì „ëµ
- **ìºì‹œ ìœ íš¨ ì‹œê°„**: 1ì‹œê°„
- **ëª©ì **: API í˜¸ì¶œ íšŸìˆ˜ ìµœì†Œí™” (ì¼ì¼ í•œë„: 250/750íšŒ)
- **êµ¬í˜„**: ì£¼ì‹ ëª©ë¡ì„ ë©”ëª¨ë¦¬ì— ìºì‹±í•˜ì—¬ ë°˜ë³µ í˜¸ì¶œ ë°©ì§€

## 3. Kwon Strategy í•µì‹¬ ë¡œì§

### 3.1 ë‹¨ì¼ í”¼í¬(Single Peak) íŒ¨í„´ ì‹ë³„

#### í”¼í¬ íƒì§€ ì•Œê³ ë¦¬ì¦˜
```python
def _find_single_peak(self, candles: List[Dict]) -> Optional[Tuple[int, float]]:
    # ìµœê·¼ 10ê°œ ìº”ë“¤ì—ì„œ í”¼í¬ ì°¾ê¸°
    peaks = []
    for i in range(1, len(candles) - 1):
        if candles[i]['high'] > candles[i-1]['high'] and 
           candles[i]['high'] > candles[i+1]['high']:
            peaks.append((i, candles[i]['high']))
    
    # ë‹¨ì¼ í”¼í¬ë§Œ ìœ íš¨
    if len(peaks) != 1:
        return None
```

#### í”¼í¬ ìœ íš¨ì„± ê²€ì¦
1. **ìœ„ì¹˜ ì¡°ê±´**: í”¼í¬ê°€ 2~7ë²ˆì§¸ ìº”ë“¤ ì‚¬ì´ì— ìœ„ì¹˜
   - ë„ˆë¬´ ìµœê·¼(1ë²ˆì§¸): íŒ¨í„´ í˜•ì„± ë¯¸ì™„ë£Œ
   - ë„ˆë¬´ ì˜¤ë˜ë¨(8ë²ˆì§¸ ì´í›„): ì‹œê·¸ë„ ê°•ë„ ì•½í™”

2. **ìƒëŒ€ì  ë†’ì´**: í”¼í¬ê°€ ì „ì²´ ê¸°ê°„ ìµœê³ ê°€ì˜ 95% ì´ìƒ
   ```python
   if peak_price < max_high * 0.95:
       return None
   ```

### 3.2 ë² ì–´ë¦¬ì‹œ íŒ¨í„´ í™•ì¸

#### í”¼í¬ ì´í›„ í•˜ë½ íŒ¨í„´ ë¶„ì„
```python
def _check_bearish_after_peak(self, candles: List[Dict], peak_index: int) -> bool:
    after_peak = candles[peak_index + 1:]
    bearish_count = 0
    
    for candle in after_peak:
        # ìŒë´‰ ì¹´ìš´íŠ¸
        if candle['close'] < candle['open']:
            bearish_count += 1
        
        # ìœ„ê¼¬ë¦¬ê°€ ê¸´ ìŒë´‰ (ë§¤ë„ ì••ë ¥ ì‹ í˜¸)
        body = abs(candle['close'] - candle['open'])
        upper_wick = candle['high'] - max(candle['close'], candle['open'])
        if upper_wick > body * 1.5 and candle['close'] < candle['open']:
            bearish_count += 0.5
    
    # 50% ì´ìƒì´ ë² ì–´ë¦¬ì‹œ íŒ¨í„´ì´ì–´ì•¼ í•¨
    return bearish_count >= len(after_peak) * 0.5
```

### 3.3 EMA ê¸°ë°˜ ì§„ì…ì  ê²°ì •

#### EMA ê³„ì‚° ë° ì ìš©
```python
# EMA 20 (ë‹¨ê¸°) ë° EMA 50 (ì¥ê¸°) ê³„ì‚°
ema_short = calculate_ema(close_prices, 20)
ema_long = calculate_ema(close_prices, 50)

# í˜„ì¬ ì €ê°€ê°€ EMAë³´ë‹¤ ë‚®ì€ì§€ í™•ì¸
buy_condition_short = current_low < current_ema_short
buy_condition_long = current_low < current_ema_long

# ì§„ì… ê°€ê²© = EMA ë ˆë²¨
entry_price = current_ema_short if buy_condition_short else current_ema_long
```

#### EMA ì§„ì… ë¡œì§ì˜ ì˜ë¯¸
- **ì €ê°€ < EMA**: ì¼ì‹œì  ê³¼ë§¤ë„ ìƒíƒœ
- **EMA ë ˆë²¨ ì§„ì…**: í‰ê·  íšŒê·€ ì „ëµ
- **ìš°ì„ ìˆœìœ„**: EMA 20 > EMA 50 (ë‹¨ê¸° ì§€í‘œ ìš°ì„ )

## 4. ì‹œê·¸ë„ ê°•ë„ í‰ê°€ ì‹œìŠ¤í…œ

### 4.1 ê°•ë„ ì ìˆ˜ ê³„ì‚° ìš”ì†Œ

#### 1) í’€ë°±(Pullback) ì •ë„
```python
pullback_pct = abs((current_price - peak_price) / peak_price)
if 0.15 <= pullback_pct <= 0.30:  # 15-30% í•˜ë½
    strength_score += 2  # ì´ìƒì ì¸ í’€ë°±
elif 0.10 <= pullback_pct < 0.15:  # 10-15% í•˜ë½
    strength_score += 1  # ì ì ˆí•œ í’€ë°±
```

#### 2) ê±°ë˜ëŸ‰ ë¹„ìœ¨
```python
volume_ratio = current_volume / average_volume_20
if volume_ratio > 1.5:  # í‰ê·  ëŒ€ë¹„ 150% ì´ìƒ
    strength_score += 2  # ê°•í•œ ê´€ì‹¬
elif volume_ratio > 1.0:  # í‰ê·  ì´ìƒ
    strength_score += 1  # ì •ìƒì  ê´€ì‹¬
```

#### 3) ë³€ë™ì„± í‰ê°€
```python
recent_volatility = _calculate_volatility(candles[-20:])
if recent_volatility < 0.03:  # 3% ë¯¸ë§Œ
    strength_score += 1  # ì•ˆì •ì  íŒ¨í„´
```

#### 4) RSI (ìƒëŒ€ê°•ë„ì§€ìˆ˜)
```python
rsi = _calculate_rsi(candles[-14:])
if rsi < 40:  # ê³¼ë§¤ë„ êµ¬ê°„
    strength_score += 2
elif rsi < 50:  # ì•½ì„¸ êµ¬ê°„
    strength_score += 1
```

### 4.2 ì‹œê·¸ë„ ê°•ë„ ë¶„ë¥˜
```python
if strength_score >= 5:
    return "STRONG"    # ë§¤ìš° ê°•í•œ ì‹œê·¸ë„
elif strength_score >= 3:
    return "MODERATE"  # ë³´í†µ ì‹œê·¸ë„
else:
    return "WEAK"      # ì•½í•œ ì‹œê·¸ë„
```

## 5. ë¦¬ìŠ¤í¬ ê´€ë¦¬

### 5.1 ì†ìµ ë¹„ìœ¨ ì„¤ì •
```python
TP_RATIO = 0.07  # Take Profit: +7%
SL_RATIO = 0.03  # Stop Loss: -3%

tp_price = entry_price * (1 + TP_RATIO)
sl_price = entry_price * (1 - SL_RATIO)
risk_reward = (tp_price - entry_price) / (entry_price - sl_price)
```

### 5.2 ì‹œê·¸ë„ ê²€ì¦ ê¸°ì¤€
```python
def validate_signal(self, signal: Dict) -> bool:
    # ë¦¬ìŠ¤í¬/ë¦¬ì›Œë“œ ë¹„ìœ¨ ìµœì†Œ 1.5:1
    if signal['risk_reward'] < 1.5:
        return False
    
    # ì•½í•œ ì‹œê·¸ë„ ì œì™¸
    if signal['signal_strength'] == "WEAK":
        return False
    
    # ê±°ë˜ëŸ‰ ìµœì†Œ ìš”êµ¬ì‚¬í•­
    if signal['volume_ratio'] < 0.5:
        return False
```

## 6. ì‹œê·¸ë„ ìƒì„± í”„ë¡œì„¸ìŠ¤ ìƒì„¸

### 6.1 ë°ì´í„° ìˆ˜ì§‘
1. **ì£¼ê°„ ìº”ë“¤ ë°ì´í„°**: ìµœê·¼ 52ì£¼ (1ë…„) ë°ì´í„° ìˆ˜ì§‘
2. **ì‹¤ì‹œê°„ ê°€ê²©**: í˜„ì¬ ê°€ê²© ë° ê±°ë˜ëŸ‰ ì •ë³´
3. **ê¸°ì—… ì •ë³´**: ì‹œê°€ì´ì•¡, ì„¹í„°, ì‚°ì—… ì •ë³´

### 6.2 íŒ¨í„´ ë§¤ì¹­ ìˆœì„œ
```
1. ë°ì´í„° ì¶©ë¶„ì„± í™•ì¸ (ìµœì†Œ 50ê°œ ìº”ë“¤)
    â†“
2. EMA 20, 50 ê³„ì‚°
    â†“
3. ìµœê·¼ 10ê°œ ìº”ë“¤ì—ì„œ ë‹¨ì¼ í”¼í¬ íƒìƒ‰
    â†“
4. í”¼í¬ ìœ„ì¹˜ ë° ë†’ì´ ê²€ì¦
    â†“
5. í”¼í¬ ì´í›„ ë² ì–´ë¦¬ì‹œ íŒ¨í„´ í™•ì¸
    â†“
6. í˜„ì¬ ì €ê°€ì™€ EMA ë¹„êµ
    â†“
7. ì§„ì…ì , TP, SL ê³„ì‚°
    â†“
8. ì‹œê·¸ë„ ê°•ë„ í‰ê°€
    â†“
9. ìµœì¢… ê²€ì¦ ë° í•„í„°ë§
```

### 6.3 ì‹œê·¸ë„ ìƒì„± ì¡°ê±´ ìš”ì•½
ëª¨ë“  ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ ì‹œê·¸ë„ ìƒì„±:
1. âœ… ìµœê·¼ 10ì£¼ ë‚´ ë‹¨ì¼ í”¼í¬ ì¡´ì¬
2. âœ… í”¼í¬ê°€ 2-7ì£¼ ì „ ìœ„ì¹˜
3. âœ… í”¼í¬ê°€ ìµœê³ ê°€ì˜ 95% ì´ìƒ
4. âœ… í”¼í¬ ì´í›„ 50% ì´ìƒ ë² ì–´ë¦¬ì‹œ ìº”ë“¤
5. âœ… í˜„ì¬ ì €ê°€ < EMA (20 ë˜ëŠ” 50)
6. âœ… ë¦¬ìŠ¤í¬/ë¦¬ì›Œë“œ ë¹„ìœ¨ â‰¥ 1.5
7. âœ… ì‹œê·¸ë„ ê°•ë„ â‰  "WEAK"
8. âœ… ê±°ë˜ëŸ‰ ë¹„ìœ¨ â‰¥ 0.5

## 7. ë©”ëª¨ë¦¬ ë° ì„±ëŠ¥ ìµœì í™”

### 7.1 ë°°ì¹˜ ì²˜ë¦¬
```python
def process_stocks_in_batches(stocks, process_func, batch_size=20):
    for i in range(0, len(stocks), batch_size):
        batch = stocks[i:i+batch_size]
        # ë°°ì¹˜ ì²˜ë¦¬ í›„ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜
        gc.collect()
```

### 7.2 API í˜¸ì¶œ ìµœì í™”
- **LRU ìºì‹±**: ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„° ìºì‹±
- **ì¼ì¼ í•œë„ ê´€ë¦¬**: 250/750íšŒ ì œí•œ ì¶”ì 
- **ìŠ¤ë§ˆíŠ¸ ìºì‹±**: 1ì‹œê°„ ìœ íš¨ ê¸°ê°„ì˜ ì£¼ì‹ ëª©ë¡ ìºì‹±

### 7.3 ì¤‘ë³µ ì‹œê·¸ë„ ë°©ì§€
```python
# ë‚ ì§œë³„ ì‹œê·¸ë„ í‚¤ ìƒì„±
signal_key = f"{symbol}_{datetime.now().date().isoformat()}"

# ì´ë¯¸ ì „ì†¡ëœ ì‹œê·¸ë„ ì²´í¬
if signal_key in self.signals_sent:
    return
```

## 8. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

### 8.1 í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ í¬ë§·
```
ğŸ¯ STOCK BUY SIGNAL

Symbol: AAPL
Company: Apple Inc.
Sector: Technology
Market Cap: $2.5T

ğŸ“Š Signal Details:
â€¢ Current Price: $175.50
â€¢ Entry Price: $178.20
â€¢ Take Profit: $190.67 (+7.0%)
â€¢ Stop Loss: $172.85 (-3.0%)

ğŸ“ˆ Technical Analysis:
â€¢ Peak Price: $195.00 (3 weeks ago)
â€¢ Pullback: -10.0%
â€¢ EMA20: $178.20
â€¢ Volume Ratio: 1.8x avg
â€¢ Signal Strength: STRONG
â€¢ Risk/Reward: 2.3:1
```

### 8.2 ì¼ì¼ ìš”ì•½ ë³´ê³ ì„œ
ë§¤ì¼ 16:30 (ì‹œì¥ ì¢…ë£Œ í›„) ìë™ ì „ì†¡:
- ê°€ë™ ì‹œê°„
- ì´ ìŠ¤ìº” íšŸìˆ˜
- ë°œê²¬ëœ ì‹œê·¸ë„ ìˆ˜
- ëª¨ë‹ˆí„°ë§ ì¤‘ì¸ ì£¼ì‹ ìˆ˜
- ë‚¨ì€ API í˜¸ì¶œ íšŸìˆ˜
- ì‹œì¥ ìƒíƒœ ì •ë³´

## 9. ì „ëµì˜ í•µì‹¬ ì›ë¦¬

### 9.1 í‰ê·  íšŒê·€ (Mean Reversion)
- ì£¼ê°€ëŠ” ì¥ê¸°ì ìœ¼ë¡œ í‰ê· (EMA)ìœ¼ë¡œ íšŒê·€í•˜ëŠ” ê²½í–¥
- ê³¼ë§¤ë„ ìƒíƒœì—ì„œ í‰ê· ìœ¼ë¡œì˜ ë³µê·€ë¥¼ ë…¸ë¦¼

### 9.2 ëª¨ë©˜í…€ ì „í™˜
- ë‹¨ì¼ í”¼í¬ í›„ í•˜ë½ = ìƒìŠ¹ ëª¨ë©˜í…€ ì†Œì§„
- ë² ì–´ë¦¬ì‹œ íŒ¨í„´ = ë§¤ë„ ì••ë ¥ í™•ì¸
- EMA í•˜ë°© ëŒíŒŒ = ì¼ì‹œì  ê³¼ë§¤ë„

### 9.3 ë¦¬ìŠ¤í¬ ê´€ë¦¬
- ëª…í™•í•œ ì§„ì…/ì²­ì‚° ê¸°ì¤€
- ì‚¬ì „ ì •ì˜ëœ ì†ì ˆ/ìµì ˆ ë ˆë²¨
- ë¦¬ìŠ¤í¬/ë¦¬ì›Œë“œ ë¹„ìœ¨ ê²€ì¦

## 10. ì‹œìŠ¤í…œ í•œê³„ ë° ì£¼ì˜ì‚¬í•­

### 10.1 í•œê³„ì 
1. **ì£¼ê°„ ë°ì´í„° ê¸°ë°˜**: ë‹¨ê¸° ë³€ë™ì„± ë¯¸ë°˜ì˜
2. **ê³¼ê±° ë°ì´í„° ì˜ì¡´**: ë¯¸ë˜ ì˜ˆì¸¡ ë¶ˆí™•ì‹¤
3. **ë‹¨ì¼ ì „ëµ**: ë‹¤ì–‘í•œ ì‹œì¥ ìƒí™© ëŒ€ì‘ ì œí•œ
4. **API ì œí•œ**: ì¼ì¼ í˜¸ì¶œ íšŸìˆ˜ í•œë„

### 10.2 ì£¼ì˜ì‚¬í•­
1. **ë°±í…ŒìŠ¤íŒ… í•„ìš”**: ì‹¤ì œ íˆ¬ì ì „ ê³¼ê±° ë°ì´í„° ê²€ì¦
2. **ì‹œì¥ ìƒí™© ê³ ë ¤**: ì „ì²´ ì‹œì¥ íŠ¸ë Œë“œ í™•ì¸
3. **ë¶„ì‚° íˆ¬ì**: ë‹¨ì¼ ì‹œê·¸ë„ì— ê³¼ë„í•œ ì˜ì¡´ ê¸ˆì§€
4. **ì§€ì†ì  ëª¨ë‹ˆí„°ë§**: ì‹œìŠ¤í…œ ì„±ëŠ¥ ì¶”ì  ë° ì¡°ì •

## ê²°ë¡ 

ì´ ì‹œìŠ¤í…œì€ Kwon Strategyë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì²´ê³„ì ì´ê³  ìë™í™”ëœ ë§¤ìˆ˜ ì‹œê·¸ë„ í¬ì°© ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ë‹¨ì¼ í”¼í¬ íŒ¨í„´, ë² ì–´ë¦¬ì‹œ í™•ì¸, EMA ê¸°ë°˜ ì§„ì…ì´ë¼ëŠ” ì„¸ ê°€ì§€ í•µì‹¬ ìš”ì†Œë¥¼ ê²°í•©í•˜ì—¬ ë†’ì€ í™•ë¥ ì˜ ë§¤ìˆ˜ ê¸°íšŒë¥¼ ì‹ë³„í•©ë‹ˆë‹¤. 

ê°•ë ¥í•œ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì™€ ì‹œê·¸ë„ ê²€ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ì˜ëª»ëœ ì‹œê·¸ë„ì„ í•„í„°ë§í•˜ê³ , ì‹¤ì‹œê°„ í…”ë ˆê·¸ë¨ ì•Œë¦¼ìœ¼ë¡œ ì¦‰ê°ì ì¸ ëŒ€ì‘ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¤ë§Œ, ëª¨ë“  ìë™í™” íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‹œì¥ ìƒí™©ì— ë”°ë¥¸ ì„±ê³¼ ë³€ë™ì„±ì´ ìˆìœ¼ë¯€ë¡œ ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ê³¼ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.